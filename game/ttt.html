<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }
        .cell {
            font-family: sans-serif;
            font-size: larger;
            font-weight: bolder;
            background-color: beige;
            width: 100px;
            height: 100px;
            border: 1px solid black;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .cell:hover{
            background-color: blanchedalmond;
        }

        .row {
            display: flex;
        }
    </style>
</head>

<body>
    <h1 id="turn">
        Now it's is X turn
    </h1>
    <!-- Board -->
    <div class="board">
        <div class="row">
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
        </div>
        <div class="row">
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
        </div>
        <div class="row">
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
        </div>
        
        <button id="refreshButton">Reset</button>
        <script>
// turn managment.

//add letter when we click on the cell

//check the state of the game.  TODO

//switch turns if not end

// announce winner.









const refreshButton = document.getElementById('refreshButton');

refreshButton.addEventListener('click', function() {
    location.reload();
});
           const  board =  document.querySelector(".board");//Get element whats the differenct ? 
           let row1 = board.querySelector(".row:nth-child(1)")
           let row2 = board.querySelector(".row:nth-child(2)")
           let row3 = board.querySelector(".row:nth-child(3)")
           console.log(row1);
           console.log(row2);
           console.log(row3);
                       

         
            // controll turns 
            let isDraw = 0;
            let turn = 0
            let letter = "X"
            let checkWinner = false;
            let isFinish = false;

            // // add letters
            document.querySelector(".board").addEventListener("click", play_turn)

            document.addEventListener('keydown', (event) => {
  var key_pressed = event.key;
  var code = event.code;
  let q = row1.querySelector(".cell:nth-child(1)")
  let w = row1.querySelector(".cell:nth-child(2)")
  let e = row1.querySelector(".cell:nth-child(3)")

  let a = row2.querySelector(".cell:nth-child(1)")
  let s = row2.querySelector(".cell:nth-child(2)")
  let d = row2.querySelector(".cell:nth-child(3)")

  let z = row3.querySelector(".cell:nth-child(1)")
  let x = row3.querySelector(".cell:nth-child(2)")
  let c = row3.querySelector(".cell:nth-child(3)")
  // Alert the key name and key code on keydown

if(key_pressed == "q"){
    console.log("q");
    play_keyboard(q);
    
}

if(key_pressed == "w"){
    console.log("w");
    play_keyboard(w);
    
}

if(key_pressed == "e"){
    console.log("e");
    play_keyboard(e);
    
}


if(key_pressed == "a"){
    console.log("a");
    play_keyboard(a);
    
}

if(key_pressed == "s"){
    console.log("s");
    play_keyboard(s);
    
}

if(key_pressed == "d"){
    console.log("d");
    play_keyboard(d);
    
}


if(key_pressed == "z"){
    console.log("z");
    play_keyboard(z);
    
}

if(key_pressed == "x"){
    console.log("x");
    play_keyboard(x);
    
}

if(key_pressed == "c"){
    console.log("c");
    play_keyboard(c);
    
}





}, false);



           
        function play_turn(e) {

            //     //get target
            if(!isFinish){
                cell = e.target

//add the letter
textElement = document.createTextNode(`${letter}`)


//     //change turn
turn = (turn + 1) % 2;


//change letter
if(cell.textContent == ''){
    cell.style.backgroundColor ="white";
   
    if (turn == 0) {
    letter = "X"
} else {
    letter = "O"
}
cell.appendChild(textElement)
isDraw++;
}


//Checking if win:

if(row1.querySelector(".cell:nth-child(3)").textContent== "X"  && row2.querySelector(".cell:nth-child(3)").textContent== "X" && row3.querySelector(".cell:nth-child(3)").textContent == "X" ) {
    console.log("win x");
    document.getElementById("turn").innerText = "X Won !"
    isFinish = true;
}

if(row1.querySelector(".cell:nth-child(3)").textContent== "O"  && row2.querySelector(".cell:nth-child(3)").textContent== "O" && row3.querySelector(".cell:nth-child(3)").textContent == "O" ) {
    console.log("win O ");
    document.getElementById("turn").innerText = "O Won !"
    isFinish = true;
}


if(row1.querySelector(".cell:nth-child(2)").textContent== "X"  && row2.querySelector(".cell:nth-child(2)").textContent== "X" && row3.querySelector(".cell:nth-child(2)").textContent == "X" ) {
    console.log("win x");
    document.getElementById("turn").innerText = "X Won !"
    isFinish = true;
}

if(row1.querySelector(".cell:nth-child(2)").textContent== "O"  && row2.querySelector(".cell:nth-child(2)").textContent== "O" && row3.querySelector(".cell:nth-child(2)").textContent == "O" ) {
    console.log("win x");
    document.getElementById("turn").innerText = "O Won !"
    isFinish = true;
}

if(row1.querySelector(".cell:nth-child(1)").textContent== "X"  && row2.querySelector(".cell:nth-child(1)").textContent== "X" && row3.querySelector(".cell:nth-child(1)").textContent == "X" ) {
    console.log("win x");
    document.getElementById("turn").innerText = "X Won !"
    isFinish = true;
}

if(row1.querySelector(".cell:nth-child(1)").textContent== "O"  && row2.querySelector(".cell:nth-child(1)").textContent== "O" && row3.querySelector(".cell:nth-child(1)").textContent == "O" ) {
    console.log("win x");
    document.getElementById("turn").innerText = "O Won !"
    isFinish = true;
}



if(row1.querySelector(".cell:nth-child(1)").textContent== "X"  && row1.querySelector(".cell:nth-child(2)").textContent== "X" && row1.querySelector(".cell:nth-child(3)").textContent == "X" ) {
    console.log("win x");
    document.getElementById("turn").innerText = "X Won !"
    isFinish = true;
}

if(row1.querySelector(".cell:nth-child(1)").textContent== "O"  && row1.querySelector(".cell:nth-child(2)").textContent== "O" && row1.querySelector(".cell:nth-child(3)").textContent == "O" ) {
    console.log("win O ");
    document.getElementById("turn").innerText = "O Won !"
    isFinish = true;
}


if(row2.querySelector(".cell:nth-child(1)").textContent== "X"  && row2.querySelector(".cell:nth-child(2)").textContent== "X" && row2.querySelector(".cell:nth-child(3)").textContent == "X" ) {
    console.log("win x");
    document.getElementById("turn").innerText = "X Won !"
    isFinish = true;
}

if(row2.querySelector(".cell:nth-child(1)").textContent== "O"  && row2.querySelector(".cell:nth-child(2)").textContent== "O" && row2.querySelector(".cell:nth-child(3)").textContent == "O" ) {
    console.log("win x");
    document.getElementById("turn").innerText = "O Won !"
    isFinish = true;
}

if(row3.querySelector(".cell:nth-child(1)").textContent== "X"  && row3.querySelector(".cell:nth-child(2)").textContent== "X" && row3.querySelector(".cell:nth-child(3)").textContent == "X" ) {
    console.log("win x");
    document.getElementById("turn").innerText = "X Won !"
    isFinish = true;
}

if(row3.querySelector(".cell:nth-child(1)").textContent== "O"  && row3.querySelector(".cell:nth-child(2)").textContent== "O" && row3.querySelector(".cell:nth-child(3)").textContent == "O" ) {
    console.log("win x");
    document.getElementById("turn").innerText = "O Won !"
    isFinish = true;
}


if(row1.querySelector(".cell:nth-child(3)").textContent== "X"  && row2.querySelector(".cell:nth-child(2)").textContent== "X" && row3.querySelector(".cell:nth-child(1)").textContent == "X" ) {
    console.log("win x");
    document.getElementById("turn").innerText = "X Won !"
    isFinish = true;
}

if(row1.querySelector(".cell:nth-child(3)").textContent== "O"  && row2.querySelector(".cell:nth-child(2)").textContent== "O" && row3.querySelector(".cell:nth-child(1)").textContent == "O" ) {
    console.log("win x");
    document.getElementById("turn").innerText = "O Won !"
    isFinish = true;
}


if(row1.querySelector(".cell:nth-child(1)").textContent== "X"  && row2.querySelector(".cell:nth-child(2)").textContent== "X" && row3.querySelector(".cell:nth-child(3)").textContent == "X" ) {
    console.log("win x");
    document.getElementById("turn").innerText = "X Won !"
    isFinish = true;
}

if(row1.querySelector(".cell:nth-child(1)").textContent== "O"  && row2.querySelector(".cell:nth-child(2)").textContent== "O" && row3.querySelector(".cell:nth-child(3)").textContent == "O" ) {
    console.log("win x");
    document.getElementById("turn").innerText = "O Won !"
    isFinish = true;
}




    





//change title



if(isDraw>=9){
    document.getElementById("turn").innerText = "It is draw!"
}
else{
    if(!isFinish)
    document.getElementById("turn").innerText = `Now it's ${letter} turn`
}
            }
               

            }









            /////////


            function play_keyboard(e) {

//     //get target
if(!isFinish){
    cell = e

//add the letter
textElement = document.createTextNode(`${letter}`)


//     //change turn
turn = (turn + 1) % 2;


//change letter
if(cell.textContent == ''){
cell.style.backgroundColor ="white";

if (turn == 0) {
letter = "X"
} else {
letter = "O"
}
cell.appendChild(textElement)
isDraw++;
}


//Checking if win:

if(row1.querySelector(".cell:nth-child(3)").textContent== "X"  && row2.querySelector(".cell:nth-child(3)").textContent== "X" && row3.querySelector(".cell:nth-child(3)").textContent == "X" ) {
console.log("win x");
document.getElementById("turn").innerText = "X Won !"
isFinish = true;
}

if(row1.querySelector(".cell:nth-child(3)").textContent== "O"  && row2.querySelector(".cell:nth-child(3)").textContent== "O" && row3.querySelector(".cell:nth-child(3)").textContent == "O" ) {
console.log("win O ");
document.getElementById("turn").innerText = "O Won !"
isFinish = true;
}


if(row1.querySelector(".cell:nth-child(2)").textContent== "X"  && row2.querySelector(".cell:nth-child(2)").textContent== "X" && row3.querySelector(".cell:nth-child(2)").textContent == "X" ) {
console.log("win x");
document.getElementById("turn").innerText = "X Won !"
isFinish = true;
}

if(row1.querySelector(".cell:nth-child(2)").textContent== "O"  && row2.querySelector(".cell:nth-child(2)").textContent== "O" && row3.querySelector(".cell:nth-child(2)").textContent == "O" ) {
console.log("win x");
document.getElementById("turn").innerText = "O Won !"
isFinish = true;
}

if(row1.querySelector(".cell:nth-child(1)").textContent== "X"  && row2.querySelector(".cell:nth-child(1)").textContent== "X" && row3.querySelector(".cell:nth-child(1)").textContent == "X" ) {
console.log("win x");
document.getElementById("turn").innerText = "X Won !"
isFinish = true;
}

if(row1.querySelector(".cell:nth-child(1)").textContent== "O"  && row2.querySelector(".cell:nth-child(1)").textContent== "O" && row3.querySelector(".cell:nth-child(1)").textContent == "O" ) {
console.log("win x");
document.getElementById("turn").innerText = "O Won !"
isFinish = true;
}



if(row1.querySelector(".cell:nth-child(1)").textContent== "X"  && row1.querySelector(".cell:nth-child(2)").textContent== "X" && row1.querySelector(".cell:nth-child(3)").textContent == "X" ) {
console.log("win x");
document.getElementById("turn").innerText = "X Won !"
isFinish = true;
}

if(row1.querySelector(".cell:nth-child(1)").textContent== "O"  && row1.querySelector(".cell:nth-child(2)").textContent== "O" && row1.querySelector(".cell:nth-child(3)").textContent == "O" ) {
console.log("win O ");
document.getElementById("turn").innerText = "O Won !"
isFinish = true;
}


if(row2.querySelector(".cell:nth-child(1)").textContent== "X"  && row2.querySelector(".cell:nth-child(2)").textContent== "X" && row2.querySelector(".cell:nth-child(3)").textContent == "X" ) {
console.log("win x");
document.getElementById("turn").innerText = "X Won !"
isFinish = true;
}

if(row2.querySelector(".cell:nth-child(1)").textContent== "O"  && row2.querySelector(".cell:nth-child(2)").textContent== "O" && row2.querySelector(".cell:nth-child(3)").textContent == "O" ) {
console.log("win x");
document.getElementById("turn").innerText = "O Won !"
isFinish = true;
}

if(row3.querySelector(".cell:nth-child(1)").textContent== "X"  && row3.querySelector(".cell:nth-child(2)").textContent== "X" && row3.querySelector(".cell:nth-child(3)").textContent == "X" ) {
console.log("win x");
document.getElementById("turn").innerText = "X Won !"
isFinish = true;
}

if(row3.querySelector(".cell:nth-child(1)").textContent== "O"  && row3.querySelector(".cell:nth-child(2)").textContent== "O" && row3.querySelector(".cell:nth-child(3)").textContent == "O" ) {
console.log("win x");
document.getElementById("turn").innerText = "O Won !"
isFinish = true;
}


if(row1.querySelector(".cell:nth-child(3)").textContent== "X"  && row2.querySelector(".cell:nth-child(2)").textContent== "X" && row3.querySelector(".cell:nth-child(1)").textContent == "X" ) {
console.log("win x");
document.getElementById("turn").innerText = "X Won !"
isFinish = true;
}

if(row1.querySelector(".cell:nth-child(3)").textContent== "O"  && row2.querySelector(".cell:nth-child(2)").textContent== "O" && row3.querySelector(".cell:nth-child(1)").textContent == "O" ) {
console.log("win x");
document.getElementById("turn").innerText = "O Won !"
isFinish = true;
}


if(row1.querySelector(".cell:nth-child(1)").textContent== "X"  && row2.querySelector(".cell:nth-child(2)").textContent== "X" && row3.querySelector(".cell:nth-child(3)").textContent == "X" ) {
console.log("win x");
document.getElementById("turn").innerText = "X Won !"
isFinish = true;
}

if(row1.querySelector(".cell:nth-child(1)").textContent== "O"  && row2.querySelector(".cell:nth-child(2)").textContent== "O" && row3.querySelector(".cell:nth-child(3)").textContent == "O" ) {
console.log("win x");
document.getElementById("turn").innerText = "O Won !"
isFinish = true;
}










//change title



if(isDraw>=9){
document.getElementById("turn").innerText = "It is draw!"
}
else{
if(!isFinish)
document.getElementById("turn").innerText = `Now it's ${letter} turn`
}
}
   

}



            

        </script>
    </div>
</body>

</html>